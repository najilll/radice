{% extends "web/base.html" %}
{% load static %}
{% block title %}{{ course.title }} — Courses{% endblock %}
{% block content %}
<!-- Hero Start -->
<section class="bg-half-170 d-table w-100" style="background: url('{% static "assets/images/1.jpg" %}') center center;">
    <div class="bg-overlay"></div>
    <div class="container">
        <div class="row mt-5 justify-content-center">
            <div class="col-lg-12 text-center">
                <div class="pages-heading">
                    <h3 class="title text-white title-dark mb-0">{{ course.title }}</h3>
                </div>
            </div><!--end col-->
        </div><!--end row-->

        <div class="position-breadcrumb">
            <nav aria-label="breadcrumb" class="d-inline-block">
                <ul class="breadcrumb rounded shadow mb-0 px-4 py-2">
                    <li class="breadcrumb-item"><a href="{% url 'web:index' %}">Home</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'web:course_list' %}">Courses</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{ course.title }}</li>
                </ul>
            </nav>
        </div>
    </div> <!--end container-->
</section><!--end section-->
<!-- Hero End -->

<section class="section">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="row">
                    <!-- Social share column (left) -->
                    <div class="col-md-2 d-none d-md-block">
                        <ul class="list-unstyled text-center sticky-bar social-icon social mb-0">
                            <li class="mb-2 h6">Share</li>
                            <li class="mt-1">
                                <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" rel="noopener noreferrer" class="rounded">
                                    <i class="uil uil-facebook-f"></i>
                                </a>
                            </li>
                            <li class="mt-1">
                                <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ course.title|urlencode }}" target="_blank" rel="noopener noreferrer" class="rounded">
                                    <i class="uil uil-twitter"></i>
                                </a>
                            </li>
                            <li class="mt-1">
                                <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.build_absolute_uri }}&title={{ course.title|urlencode }}" target="_blank" rel="noopener noreferrer" class="rounded">
                                    <i class="uil uil-linkedin-alt"></i>
                                </a>
                            </li>
                        </ul><!--end icon-->
                    </div>

                    <!-- Main content -->
                    <div class="col-md-10">
                        <div class="mb-3 d-flex justify-content-between align-items-start flex-wrap">
                            <div>
                                <h3 class="title mb-0">{{ course.title }}</h3>
                                <ul class="list-unstyled d-flex mt-2 mb-0">
                                    <li class="me-3 text-muted"><i class="uil uil-clock"></i> {{ course.duration }}</li>
                                    <li class="me-3 text-muted"><i class="uil uil-tag"></i> ₹{{ course.price|floatformat:2 }}</li>
                                </ul>
                            </div>

                            <div class="mt-3 mt-sm-0">
                                {# Enroll URL - replace with your actual enroll route if different #}
                                {% url 'web:enroll' course.slug as enroll_url %}
                                <a href="{{ enroll_url|default:'#' }}" class="btn btn-primary me-2">Enroll Now</a>
                                <a href="{% url 'web:course_list' %}" class="btn btn-outline-secondary">All Courses</a>
                            </div>
                        </div>

                        <!-- Course image -->
                        {% if course.image %}
                            <img src="{{ course.image.url }}" class="img-fluid rounded-md shadow mb-4" alt="{{ course.title }}">
                        {% else %}
                            <img src="{% static 'assets/images/course-placeholder.png' %}" class="img-fluid rounded-md shadow mb-4" alt="{{ course.title }}">
                        {% endif %}
                        <div class="mt-4">
                            <h6>Course details</h6>
                            <ul>
                                <li><strong>Duration:</strong> {{ course.duration }}</li>
                                <li><strong>Price:</strong> ₹{{ course.price|floatformat:2 }}</li>
                            </ul>
                        </div>

                        <!-- Course description (TinyMCE HTML) -->
                        <div class="content">
                            {{ course.description|safe }}
                        </div>

                        <!-- Additional meta / details -->

                        <!-- Related courses -->
                        {% if related_courses %}
                        <div class="mt-5">
                            <h5>Related courses</h5>
                            <div class="row">
                                {% for rc in related_courses %}
                                    <div class="col-md-4 mt-3">
                                        <div class="card border-0 shadow-sm">
                                            {% if rc.image %}
                                                <img src="{{ rc.image.url }}" class="card-img-top" alt="{{ rc.title }}">
                                            {% else %}
                                                <img src="{% static 'assets/images/course-placeholder.png' %}" class="card-img-top" alt="{{ rc.title }}">
                                            {% endif %}
                                            <div class="card-body">
                                                <h6 class="mb-1"><a href="{{ rc.get_absolute_url }}">{{ rc.title }}</a></h6>
                                                <p class="mb-0 text-muted small">{{ rc.duration }} • ₹{{ rc.price|floatformat:2 }}</p>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}
                    </div><!--end col-->
                </div><!--end row-->
            </div><!--end col-->
        </div><!--end row-->
    </div><!--end container-->
</section>
{% endblock %}
